import{r as o,j as e,H as f,a as w}from"./app-Wz8Xz1sB.js";import{U as g,F as M,f as k}from"./UserLayout-Drvek5PT.js";import{B as v}from"./Buton-BBe5_KY-.js";import{L as N}from"./Loading-DB8EKYfD.js";import{n as b}from"./Play.es-Ds3rukho.js";import{u as D}from"./useTranslation-DXkM1PKK.js";import"./Logo-CaXkd6rt.js";import"./IconBase.es-BSU2OHbn.js";import"./MagnifyingGlass.es-nIG-02Wj.js";import"./User.es-fTKSiBt1.js";const $=({auth:c})=>{const{t:A}=D(),[i,x]=o.useState(null),[h,m]=o.useState(!1),[n,u]=o.useState([]);o.useEffect(()=>{d()},[]);const d=async()=>{try{const s=await(await fetch("/api/movies/popular?page=1")).json();if(s.success&&s.movies&&s.movies.length>0){u(s.movies);const r=Math.floor(Math.random()*s.movies.length);await p(s.movies[r].id)}}catch(a){console.error("Filmler yüklenirken hata:",a)}},p=async a=>{m(!0);try{const r=await(await fetch(`/api/movies/${a}`)).json();if(r.success&&r.movie){const t=r.movie,y={id:t.id,title:t.title,originalTitle:t.original_title,year:new Date(t.release_date).getFullYear(),rating:t.vote_average,genre:t.genres||[],director:Array.isArray(t.crew)&&t.crew.find(l=>l.job==="Director")?.name||"Bilinmiyor",cast:Array.isArray(t.cast)?t.cast.slice(0,5).map(l=>l.name)||[]:[],description:t.overview||"Açıklama bulunamadı.",poster:t.poster_path||"https://via.placeholder.com/300x450/666666/FFFFFF?text=Film+Posteri",duration:`${t.runtime||0} min`,language:t.original_language==="tr"?"Türkçe":"Diğer"};x(y)}}catch(s){console.error("Film detayları alınırken hata:",s)}finally{m(!1)}},j=async()=>{if(n.length===0){await d();return}const a=Math.floor(Math.random()*n.length);await p(n[a].id)},F=()=>{i&&w.visit(`/movies/${i.id}`)};return h?e.jsxs(g,{auth:c,children:[e.jsx(f,{title:"Rastgele Film"}),e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(N,{size:"lg"})})]}):e.jsxs(g,{auth:c,children:[e.jsx(f,{title:"Rastgele Film"}),e.jsxs("div",{className:"relative pt-4",children:[i&&e.jsx("img",{src:i.poster,alt:i.title,className:"w-full",onError:a=>{a.target.src="https://via.placeholder.com/1920x1080/666666/FFFFFF?text=Film+Posteri"}}),e.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-10 flex justify-center items-center space-x-4",children:i&&e.jsxs(v,{onClick:F,variant:"primary",size:"lg",className:"flex items-center space-x-2 bg-black text-gray-900 hover:bg-gray-100 shadow-lg",children:[e.jsx(b,{className:"w-5 h-5"}),e.jsx("span",{children:"Filme Git"})]})})]}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsxs(v,{onClick:j,variant:"ghost",size:"lg",className:"flex items-center space-x-2",children:[e.jsx(M,{icon:k,className:"w-10 h-10"}),e.jsx("span",{children:"Başka Bir Film Öner"})]})})]})};export{$ as default};
