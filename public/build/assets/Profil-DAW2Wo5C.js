import{r as a,j as e,H as Q,L as W}from"./app-1CFGegWC.js";import{U as ee,L as v}from"./UserLayout-BdK1clx9.js";import{B as A}from"./Buton-D5AuJqn0.js";import{g as H,P as se}from"./PostCard-CQdjevm2.js";import{A as ae}from"./Alert-DEbxkOPg.js";import{p as te}from"./IconBase.es-CROb1i5a.js";import{m as re}from"./FlyingSaucer.es-CV1AxamM.js";import{n as k}from"./User.es-DyCkQSaU.js";import{n as T}from"./Users.es-tAYOSNba.js";import{n as U}from"./X.es-aSDIvLjQ.js";import{u as le}from"./useTranslation-B6O3CaGH.js";import"./Logo-Bs4F9_8V.js";import"./MagnifyingGlass.es-B-Qxmdvq.js";import"./TimeAgo-aeiYudVu.js";import"./Confirm-B68scm7X.js";import"./Trash.es-C5et1ok0.js";import"./ChatCircle.es-DsYPXDwK.js";import"./Heart.es-BEp-LZMX.js";import"./CheckCircle.es-Dgdv_9V1.js";import"./XCircle.es-BeaMrH8l.js";const oe=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,52H182.42L170,33.34A12,12,0,0,0,160,28H96a12,12,0,0,0-10,5.34L73.57,52H48A28,28,0,0,0,20,80V192a28,28,0,0,0,28,28H208a28,28,0,0,0,28-28V80A28,28,0,0,0,208,52Zm4,140a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V80a4,4,0,0,1,4-4H80a12,12,0,0,0,10-5.34L102.42,52h51.15L166,70.66A12,12,0,0,0,176,76h32a4,4,0,0,1,4,4ZM128,84a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,84Zm0,72a24,24,0,1,1,24-24A24,24,0,0,1,128,156Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,64H176L160,40H96L80,64H48A16,16,0,0,0,32,80V192a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V80A16,16,0,0,0,208,64ZM128,168a36,36,0,1,1,36-36A36,36,0,0,1,128,168Z",opacity:"0.2"}),a.createElement("path",{d:"M208,56H180.28L166.65,35.56A8,8,0,0,0,160,32H96a8,8,0,0,0-6.65,3.56L75.71,56H48A24,24,0,0,0,24,80V192a24,24,0,0,0,24,24H208a24,24,0,0,0,24-24V80A24,24,0,0,0,208,56Zm8,136a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V80a8,8,0,0,1,8-8H80a8,8,0,0,0,6.66-3.56L100.28,48h55.43l13.63,20.44A8,8,0,0,0,176,72h32a8,8,0,0,1,8,8ZM128,88a44,44,0,1,0,44,44A44.05,44.05,0,0,0,128,88Zm0,72a28,28,0,1,1,28-28A28,28,0,0,1,128,160Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,56H180.28L166.65,35.56A8,8,0,0,0,160,32H96a8,8,0,0,0-6.65,3.56L75.71,56H48A24,24,0,0,0,24,80V192a24,24,0,0,0,24,24H208a24,24,0,0,0,24-24V80A24,24,0,0,0,208,56Zm-44,76a36,36,0,1,1-36-36A36,36,0,0,1,164,132Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,58H179.21L165,36.67A6,6,0,0,0,160,34H96a6,6,0,0,0-5,2.67L76.78,58H48A22,22,0,0,0,26,80V192a22,22,0,0,0,22,22H208a22,22,0,0,0,22-22V80A22,22,0,0,0,208,58Zm10,134a10,10,0,0,1-10,10H48a10,10,0,0,1-10-10V80A10,10,0,0,1,48,70H80a6,6,0,0,0,5-2.67L99.21,46h57.57L171,67.33A6,6,0,0,0,176,70h32a10,10,0,0,1,10,10ZM128,90a42,42,0,1,0,42,42A42,42,0,0,0,128,90Zm0,72a30,30,0,1,1,30-30A30,30,0,0,1,128,162Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,56H180.28L166.65,35.56A8,8,0,0,0,160,32H96a8,8,0,0,0-6.65,3.56L75.71,56H48A24,24,0,0,0,24,80V192a24,24,0,0,0,24,24H208a24,24,0,0,0,24-24V80A24,24,0,0,0,208,56Zm8,136a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V80a8,8,0,0,1,8-8H80a8,8,0,0,0,6.66-3.56L100.28,48h55.43l13.63,20.44A8,8,0,0,0,176,72h32a8,8,0,0,1,8,8ZM128,88a44,44,0,1,0,44,44A44.05,44.05,0,0,0,128,88Zm0,72a28,28,0,1,1,28-28A28,28,0,0,1,128,160Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,60H178.13L163.32,37.78A4,4,0,0,0,160,36H96a4,4,0,0,0-3.32,1.78L77.85,60H48A20,20,0,0,0,28,80V192a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V80A20,20,0,0,0,208,60Zm12,132a12,12,0,0,1-12,12H48a12,12,0,0,1-12-12V80A12,12,0,0,1,48,68H80a4,4,0,0,0,3.33-1.78L98.13,44h59.72l14.82,22.22A4,4,0,0,0,176,68h32a12,12,0,0,1,12,12ZM128,92a40,40,0,1,0,40,40A40,40,0,0,0,128,92Zm0,72a32,32,0,1,1,32-32A32,32,0,0,1,128,164Z"}))]]),$=a.forwardRef((l,o)=>a.createElement(te,{ref:o,...l,weights:oe}));$.displayName="CameraIcon";const ne=$,Le=({auth:l,user:o,posts:p})=>{const{t:n}=le(),[g,F]=a.useState(!1),[L,f]=a.useState(0),[S,y]=a.useState(0),[j,w]=a.useState(null),[E,N]=a.useState(null),[t,P]=a.useState(o),[d,m]=a.useState(!1),[u,i]=a.useState({open:!1,type:"success",message:""}),[R,C]=a.useState(!1),[O,Z]=a.useState(!1),[M,B]=a.useState([]),[V,D]=a.useState([]),[I,_]=a.useState(!1),[q,z]=a.useState(!1);a.useEffect(()=>{l.user&&t&&l.user.id!==t.id?fetch(`/users/${t.username}/follow/check`).then(s=>s.json()).then(s=>{F(s.isFollowing),f(s.followersCount),y(s.followingCount)}).catch(s=>{console.error("Follow check error:",s)}):l.user&&l.user.id===t.id&&(f(t.followers_count||0),y(t.following_count||0))},[l.user,t]);const J=async()=>{if(!(!l.user||!t||l.user.id===t.id)){m(!0);try{const r=await(await fetch(`/users/${t.username}/follow`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).json();r.success?(F(r.isFollowing),f(r.followersCount),y(r.followingCount),i({open:!0,type:"success",message:r.message})):i({open:!0,type:"error",message:r.message||"Bir hata oluştu."})}catch(s){console.error("Follow error:",s),i({open:!0,type:"error",message:"Bir hata oluştu. Lütfen tekrar deneyin."})}finally{m(!1)}}},K=async()=>{_(!0);try{const r=await(await fetch(`/users/${t.username}/followers`)).json();B(r.followers.data||[])}catch(s){console.error("Followers error:",s)}finally{_(!1)}},X=async()=>{z(!0);try{const r=await(await fetch(`/users/${t.username}/following`)).json();D(r.following.data||[])}catch(s){console.error("Following error:",s)}finally{z(!1)}},Y=s=>{const r=s.target.files[0];if(r){w(r);const x=URL.createObjectURL(r);N(x)}},G=async()=>{if(j){m(!0);try{const s=new FormData;s.append("profile_photo",j);const r=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");if(!r)throw new Error("CSRF token bulunamadı. Sayfayı yenileyin.");const x=await fetch("/profile/photo",{method:"POST",headers:{"X-CSRF-TOKEN":r,Accept:"application/json"},body:s});if(x.ok){const c=await x.json();m(!1),w(null),N(null),c.profile_photo&&P(h=>({...h,profile_photo:c.profile_photo})),i({open:!0,type:"success",message:"Profil fotoğrafı başarıyla güncellendi!"})}else{const c=await x.text();console.error("Server response:",c);let h="Upload failed";try{const b=JSON.parse(c);h=b.message||b.error||"Upload failed"}catch{console.error("Response is not JSON:",c),h="Sunucu hatası. Lütfen tekrar deneyin."}throw new Error(h)}}catch(s){console.error("Upload error:",s),m(!1),i({open:!0,type:"error",message:s.message||"Fotoğraf yüklenirken bir hata oluştu."})}}};return e.jsxs(ee,{auth:l,children:[e.jsx(Q,{title:n("profile")}),e.jsx(ae,{open:u.open,type:u.type,message:u.message,onClose:()=>i({...u,open:!1})}),e.jsx("div",{className:"pb-4 mt-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-0",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-4",children:[e.jsx("div",{className:"text-center mb-6",children:e.jsxs("div",{className:"relative inline-block",children:[e.jsxs("div",{className:"relative",children:[E?e.jsx("img",{src:E,alt:"Profil önizleme",className:"w-24 h-24 rounded-full object-cover mx-auto"}):t.profile_photo?e.jsx("img",{src:`/storage/${t.profile_photo}`,alt:"Profil fotoğrafı",className:"w-24 h-24 rounded-full object-cover mx-auto",onError:s=>{s.target.style.display="none",s.target.nextSibling.style.display="flex"}}):e.jsx("div",{className:"w-24 h-24 bg-gray-300 rounded-full flex items-center justify-center mx-auto",style:{display:t.profile_photo?"none":"flex"},children:t.name?e.jsx("span",{className:"text-2xl font-bold",children:H(t.name)}):e.jsx(k,{className:"w-12 h-12 text-gray-600"})}),l.user&&l.user.id===o.id&&e.jsx("div",{className:"absolute bottom-0 right-0",children:e.jsxs("label",{className:"flex items-center justify-center bg-gray-900 text-white p-2 rounded-full hover:bg-gray-800 transition-colors cursor-pointer",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("input",{type:"file",accept:"image/*",onChange:Y,className:"hidden"})]})})]}),j&&l.user&&l.user.id===o.id&&e.jsxs("div",{className:"mt-4 flex justify-center space-x-2",children:[e.jsx(A,{onClick:G,disabled:d,size:"sm",variant:"primary",children:d?n("uploading","Yükleniyor..."):n("save")}),e.jsx(A,{onClick:()=>{w(null),N(null)},size:"sm",variant:"secondary",children:n("cancel")})]})]})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:o.name}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["@",o.username||"user"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center cursor-pointer hover:bg-gray-50 rounded-lg p-2 transition-colors",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:p?.length||0}),e.jsx("div",{className:"text-xs text-gray-500",children:n("gonderi")})]}),e.jsxs("div",{className:"text-center cursor-pointer hover:bg-gray-50 rounded-lg p-2 transition-colors",onClick:()=>{C(!0),K()},children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:L}),e.jsx("div",{className:"text-xs text-gray-500",children:n("followers")})]}),e.jsxs("div",{className:"text-center cursor-pointer hover:bg-gray-50 rounded-lg p-2 transition-colors",onClick:()=>{Z(!0),X()},children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:S}),e.jsx("div",{className:"text-xs text-gray-500",children:n("following")})]})]}),l.user&&l.user.id!==t.id&&e.jsx("div",{className:"mb-6",children:e.jsx("button",{onClick:J,disabled:d,className:`w-full px-4 py-3 rounded-full text-sm font-medium transition-all duration-200 flex items-center justify-center space-x-2 ${g?"bg-red-50 border border-red-200 text-red-600 hover:bg-red-100":"bg-blue-600 text-white hover:bg-blue-700 shadow-sm hover:shadow-md"} ${d?"opacity-50 cursor-not-allowed":""}`,children:d?e.jsxs(e.Fragment,{children:[e.jsx(v,{size:"sm"}),e.jsx("span",{children:g?"Takip Bırakılıyor...":"Takip Ediliyor..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{children:g?"Takibi Bırak":"Takip Et"})})})})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx("div",{className:"space-y-4",children:p&&p.length>0?p.map(s=>e.jsx(se,{post:s,user:t,onLike:()=>{},onComment:()=>{}},s.id)):e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4 py-16",children:[e.jsx(re,{className:"w-24 h-24 mx-auto"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Henüz paylaşım yapmamışsınız."}),e.jsx(W,{href:"/create",className:"inline-block",children:e.jsx(A,{variant:"primary",size:"md",children:"İlk Paylaşımınızı Yapın!"})})]})})})]})}),R&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full max-h-96 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Takipçiler (",L,")"]}),e.jsx("button",{onClick:()=>C(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(U,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-4 overflow-y-auto max-h-80",children:I?e.jsx("div",{className:"flex justify-center items-center text-center py-8",children:e.jsx(v,{size:"md"})}):M.length>0?e.jsx("div",{className:"space-y-3",children:M.map(s=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 hover:bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0",children:s.profile_photo?e.jsx("img",{src:`/storage/${s.profile_photo}`,alt:s.name,className:"w-10 h-10 rounded-full object-cover"}):e.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center",children:s.name?e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:H(s.name)}):e.jsx(k,{className:"w-5 h-5 text-gray-600"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500 truncate",children:["@",s.username]})]})]},s.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(T,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Henüz takipçi yok"})]})})]})}),O&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full max-h-96 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Takip Edilenler (",S,")"]}),e.jsx("button",{onClick:()=>Z(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(U,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-4 overflow-y-auto max-h-80",children:q?e.jsx("div",{className:"flex justify-center items-center text-center py-8",children:e.jsx(v,{size:"md"})}):V.length>0?e.jsx("div",{className:"space-y-3",children:V.map(s=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 hover:bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0",children:s.profile_photo?e.jsx("img",{src:`/storage/${s.profile_photo}`,alt:s.name,className:"w-10 h-10 rounded-full object-cover"}):e.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center",children:s.name?e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:H(s.name)}):e.jsx(k,{className:"w-5 h-5 text-gray-600"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500 truncate",children:["@",s.username]})]})]},s.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(T,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Henüz kimseyi takip etmiyor."})]})})]})})]})};export{Le as default};
