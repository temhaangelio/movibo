import{r as o,j as e,H as f,a as w}from"./app-CpZa01gJ.js";import{U as g,F as M,f as N}from"./UserLayout-B3MdtUT9.js";import{B as v}from"./Buton-CY-xdOIj.js";import{L as k}from"./Loading-C1F7KIhu.js";import{n as D}from"./Play.es-Db-yf1CV.js";import{u as b}from"./useTranslation-BJOxxtJW.js";import"./Logo-DkVlZRtL.js";import"./IconBase.es-BJBJe5lK.js";import"./MagnifyingGlass.es-MS6hw7UN.js";import"./User.es-Dl9Dmk3_.js";const $=({auth:c})=>{const{t:A}=b(),[i,x]=o.useState(null),[u,m]=o.useState(!1),[l,h]=o.useState([]);o.useEffect(()=>{d()},[]);const d=async()=>{try{const s=await(await fetch("/api/movies/popular?page=1")).json();if(s.success&&s.movies&&s.movies.length>0){h(s.movies);const r=Math.floor(Math.random()*s.movies.length);await p(s.movies[r].id)}}catch(a){console.error("Filmler yüklenirken hata:",a)}},p=async a=>{m(!0);try{const r=await(await fetch(`/api/movies/${a}`)).json();if(r.success&&r.movie){const t=r.movie,F={id:t.id,title:t.title,originalTitle:t.original_title,year:new Date(t.release_date).getFullYear(),rating:t.vote_average,genre:t.genres||[],director:Array.isArray(t.crew)&&t.crew.find(n=>n.job==="Director")?.name||"Bilinmiyor",cast:Array.isArray(t.cast)?t.cast.slice(0,5).map(n=>n.name)||[]:[],description:t.overview||"Açıklama bulunamadı.",poster:t.poster_path||"https://via.placeholder.com/300x450/666666/FFFFFF?text=Film+Posteri",duration:`${t.runtime||0} min`,language:t.original_language==="tr"?"Türkçe":"Diğer"};x(F)}}catch(s){console.error("Film detayları alınırken hata:",s)}finally{m(!1)}},j=async()=>{if(l.length===0){await d();return}const a=Math.floor(Math.random()*l.length);await p(l[a].id)},y=()=>{i&&w.visit(`/movies/${i.id}`)};return u?e.jsxs(g,{auth:c,children:[e.jsx(f,{title:"Rastgele Film"}),e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(k,{size:"lg"})})]}):e.jsxs(g,{auth:c,children:[e.jsx(f,{title:"Rastgele Film"}),e.jsxs("div",{className:"relative pt-4",children:[i&&e.jsx("img",{src:i.poster,alt:i.title,className:"w-full rounded-lg",onError:a=>{a.target.src="https://via.placeholder.com/1920x1080/666666/FFFFFF?text=Film+Posteri"}}),e.jsx("div",{className:"absolute top-8 left-4",children:e.jsx("div",{className:"flex flex-col space-x-2 w-full",children:i&&e.jsxs(v,{onClick:y,variant:"primary",size:"lg",className:"flex items-center space-x-2  bg-black text-gray-900 hover:bg-gray-100 shadow-lg w-full",children:[e.jsx(D,{className:"w-5 h-5"}),e.jsx("span",{children:"Göster"})]})})})]}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsxs(v,{onClick:j,variant:"primary",size:"lg",className:"flex items-center space-x-2 mt-3 w-full",children:[e.jsx(M,{icon:N,className:"w-6 h-6"}),e.jsx("span",{children:"Başka Bir Film Öner"})]})})]})};export{$ as default};
