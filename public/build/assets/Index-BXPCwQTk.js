import{r as n,j as e,H as k,L as v,a as C}from"./app-TkkgAme7.js";import{A as S}from"./AdminLayout-CVEkDfmM.js";import{C as T}from"./Card-uOYvwvn3.js";import{C as D}from"./Confirm-B7dLglQp.js";import{T as L,a as B,b as a,c as H,d as h,e as r,P as $}from"./Pagination-CS9Qi2E9.js";import{H as K}from"./Header-B4d2zvB9.js";import{s as A}from"./ChatCircle.es-CbFfZ8FY.js";import{s as I}from"./CheckCircle.es-CE08bi0J.js";import{n as c}from"./Clock.es-DXkngSAY.js";import{n as z}from"./Eye.es-CVReACx2.js";import{m as Y}from"./Question.es-QdOitaWy.js";import{n as _}from"./Trash.es-IFV9jfAt.js";import{s as F}from"./XCircle.es-WUQGI_pZ.js";import{u as P}from"./useTranslation-Duiq4AUP.js";import"./Dropdown-Bb2QVX2F.js";import"./IconBase.es-DHUL3ceQ.js";import"./MagnifyingGlass.es-J6qdx9MS.js";import"./Users.es-DjA6_PsM.js";const ie=({tickets:t={data:[],links:[],total:0,from:0,to:0}})=>{const{t:R}=P(),[m,x]=n.useState(null),[g,i]=n.useState(!1),[d,f]=n.useState(""),[o,j]=n.useState(""),u=(t?.data||[]).filter(s=>{if(d){const l=d.toLowerCase();if(!(s.user?.name?.toLowerCase().includes(l)||s.user?.email?.toLowerCase().includes(l)||s.subject?.toLowerCase().includes(l)||s.message?.toLowerCase().includes(l)))return!1}return!(o&&s.status!==o)}),p=s=>{x(s),i(!0)},b=()=>{m&&C.delete(`/panel/support/${m}`,{onSuccess:()=>{i(!1),x(null)}})},y=s=>{switch(s){case"open":return e.jsx(c,{className:"w-4 h-4 text-yellow-500"});case"closed":return e.jsx(I,{className:"w-4 h-4 text-green-500"});case"pending":return e.jsx(F,{className:"w-4 h-4 text-red-500"});default:return e.jsx(c,{className:"w-4 h-4 text-gray-500"})}},w=s=>{switch(s){case"open":return"Açık";case"closed":return"Kapalı";case"pending":return"Beklemede";default:return"Bilinmiyor"}},N=s=>{switch(s){case"open":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"closed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"pending":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return e.jsxs(S,{children:[e.jsx(k,{title:"Destek Yönetimi"}),e.jsxs(T,{className:"p-6",children:[e.jsx(K,{title:"Destek Yönetimi",searchTerm:d,onSearchChange:s=>f(s.target.value),searchPlaceholder:"Kullanıcı, konu veya mesaj ara..."}),e.jsx("div",{className:"mb-4 flex flex-wrap gap-2",children:e.jsxs("select",{value:o,onChange:s=>j(s.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Tüm Durumlar"}),e.jsx("option",{value:"open",children:"Açık"}),e.jsx("option",{value:"pending",children:"Beklemede"}),e.jsx("option",{value:"closed",children:"Kapalı"})]})}),e.jsxs(L,{children:[e.jsx(B,{children:e.jsxs("tr",{children:[e.jsx(a,{children:"Kullanıcı"}),e.jsx(a,{children:"Konu"}),e.jsx(a,{children:"Durum"}),e.jsx(a,{children:"Tarih"}),e.jsx(a,{children:"Yanıt"}),e.jsx(a,{align:"right",children:"İşlemler"})]})}),e.jsx(H,{children:u.length===0?e.jsx(h,{children:e.jsxs(r,{colSpan:6,className:"text-center py-8",children:[e.jsx(Y,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Henüz destek talebi bulunmuyor."})]})}):u.map(s=>e.jsxs(h,{children:[e.jsx(r,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-8 w-8",children:e.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-600 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-semibold",children:s.user?.name?.charAt(0).toUpperCase()})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s.user?.name||"Bilinmeyen Kullanıcı"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:s.user?.email})]})]})}),e.jsx(r,{children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white max-w-xs truncate",children:s.subject})}),e.jsx(r,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[y(s.status),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${N(s.status)}`,children:w(s.status)})]})}),e.jsx(r,{children:new Date(s.created_at).toLocaleDateString("tr-TR")}),e.jsx(r,{children:e.jsx("div",{className:"flex items-center space-x-1",children:s.admin_reply?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm text-green-600 dark:text-green-400",children:"Yanıtlandı"})]}):e.jsxs(e.Fragment,{children:[e.jsx(c,{className:"w-4 h-4 text-yellow-500"}),e.jsx("span",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:"Bekliyor"})]})})}),e.jsx(r,{align:"right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(v,{href:`/panel/support/${s.id}`,className:"inline-flex items-center justify-center w-8 h-8 border border-gray-300 dark:border-gray-600 text-xs font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",title:"Görüntüle",children:e.jsx(z,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>p(s.id),className:"inline-flex items-center justify-center w-8 h-8 border border-red-300 dark:border-red-600 text-xs font-medium rounded-md text-red-700 dark:text-red-400 bg-white dark:bg-gray-800 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",title:"Sil",children:e.jsx(_,{className:"w-4 h-4"})})]})})]},s.id))})]}),t?.links&&e.jsx($,{links:t.links,total:t.total||0,from:t.from||0,to:t.to||0})]}),e.jsx(D,{open:g,onClose:()=>i(!1),onConfirm:b,title:"Destek İsteğini Sil",message:"Bu destek isteğini silmek istediğinize emin misiniz? Bu işlem geri alınamaz.",confirmText:"Sil",cancelText:"İptal"})]})};export{ie as default};
