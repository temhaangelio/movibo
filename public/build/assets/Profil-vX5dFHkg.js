import{r as s,j as e,H as K,L as X}from"./app-CpZa01gJ.js";import{U as G}from"./UserLayout-B3MdtUT9.js";import{B as b}from"./Buton-CY-xdOIj.js";import{A as J,P as Q}from"./PostCard-CS5NYfXK.js";import{p as W}from"./IconBase.es-BJBJe5lK.js";import{n as w}from"./User.es-Dl9Dmk3_.js";import{n as Z}from"./Users.es-CIovXHcG.js";import{n as V}from"./X.es-BJGXsd37.js";import{u as ee}from"./useTranslation-BJOxxtJW.js";import"./Logo-DkVlZRtL.js";import"./MagnifyingGlass.es-MS6hw7UN.js";import"./TimeAgo-B2TR4y1j.js";import"./Confirm-Bmli8Wg4.js";import"./Trash.es-awMUiUOX.js";import"./Loading-C1F7KIhu.js";import"./ChatCircle.es-baPQ_Vxo.js";import"./Heart.es-0aop8EEO.js";import"./Star.es-wO7ke9mR.js";const ae=new Map([["bold",s.createElement(s.Fragment,null,s.createElement("path",{d:"M208,52H182.42L170,33.34A12,12,0,0,0,160,28H96a12,12,0,0,0-10,5.34L73.57,52H48A28,28,0,0,0,20,80V192a28,28,0,0,0,28,28H208a28,28,0,0,0,28-28V80A28,28,0,0,0,208,52Zm4,140a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V80a4,4,0,0,1,4-4H80a12,12,0,0,0,10-5.34L102.42,52h51.15L166,70.66A12,12,0,0,0,176,76h32a4,4,0,0,1,4,4ZM128,84a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,84Zm0,72a24,24,0,1,1,24-24A24,24,0,0,1,128,156Z"}))],["duotone",s.createElement(s.Fragment,null,s.createElement("path",{d:"M208,64H176L160,40H96L80,64H48A16,16,0,0,0,32,80V192a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V80A16,16,0,0,0,208,64ZM128,168a36,36,0,1,1,36-36A36,36,0,0,1,128,168Z",opacity:"0.2"}),s.createElement("path",{d:"M208,56H180.28L166.65,35.56A8,8,0,0,0,160,32H96a8,8,0,0,0-6.65,3.56L75.71,56H48A24,24,0,0,0,24,80V192a24,24,0,0,0,24,24H208a24,24,0,0,0,24-24V80A24,24,0,0,0,208,56Zm8,136a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V80a8,8,0,0,1,8-8H80a8,8,0,0,0,6.66-3.56L100.28,48h55.43l13.63,20.44A8,8,0,0,0,176,72h32a8,8,0,0,1,8,8ZM128,88a44,44,0,1,0,44,44A44.05,44.05,0,0,0,128,88Zm0,72a28,28,0,1,1,28-28A28,28,0,0,1,128,160Z"}))],["fill",s.createElement(s.Fragment,null,s.createElement("path",{d:"M208,56H180.28L166.65,35.56A8,8,0,0,0,160,32H96a8,8,0,0,0-6.65,3.56L75.71,56H48A24,24,0,0,0,24,80V192a24,24,0,0,0,24,24H208a24,24,0,0,0,24-24V80A24,24,0,0,0,208,56Zm-44,76a36,36,0,1,1-36-36A36,36,0,0,1,164,132Z"}))],["light",s.createElement(s.Fragment,null,s.createElement("path",{d:"M208,58H179.21L165,36.67A6,6,0,0,0,160,34H96a6,6,0,0,0-5,2.67L76.78,58H48A22,22,0,0,0,26,80V192a22,22,0,0,0,22,22H208a22,22,0,0,0,22-22V80A22,22,0,0,0,208,58Zm10,134a10,10,0,0,1-10,10H48a10,10,0,0,1-10-10V80A10,10,0,0,1,48,70H80a6,6,0,0,0,5-2.67L99.21,46h57.57L171,67.33A6,6,0,0,0,176,70h32a10,10,0,0,1,10,10ZM128,90a42,42,0,1,0,42,42A42,42,0,0,0,128,90Zm0,72a30,30,0,1,1,30-30A30,30,0,0,1,128,162Z"}))],["regular",s.createElement(s.Fragment,null,s.createElement("path",{d:"M208,56H180.28L166.65,35.56A8,8,0,0,0,160,32H96a8,8,0,0,0-6.65,3.56L75.71,56H48A24,24,0,0,0,24,80V192a24,24,0,0,0,24,24H208a24,24,0,0,0,24-24V80A24,24,0,0,0,208,56Zm8,136a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V80a8,8,0,0,1,8-8H80a8,8,0,0,0,6.66-3.56L100.28,48h55.43l13.63,20.44A8,8,0,0,0,176,72h32a8,8,0,0,1,8,8ZM128,88a44,44,0,1,0,44,44A44.05,44.05,0,0,0,128,88Zm0,72a28,28,0,1,1,28-28A28,28,0,0,1,128,160Z"}))],["thin",s.createElement(s.Fragment,null,s.createElement("path",{d:"M208,60H178.13L163.32,37.78A4,4,0,0,0,160,36H96a4,4,0,0,0-3.32,1.78L77.85,60H48A20,20,0,0,0,28,80V192a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V80A20,20,0,0,0,208,60Zm12,132a12,12,0,0,1-12,12H48a12,12,0,0,1-12-12V80A12,12,0,0,1,48,68H80a4,4,0,0,0,3.33-1.78L98.13,44h59.72l14.82,22.22A4,4,0,0,0,176,68h32a12,12,0,0,1,12,12ZM128,92a40,40,0,1,0,40,40A40,40,0,0,0,128,92Zm0,72a32,32,0,1,1,32-32A32,32,0,0,1,128,164Z"}))]]),M=s.forwardRef((l,o)=>s.createElement(W,{ref:o,...l,weights:ae}));M.displayName="CameraIcon";const se=M,we=({auth:l,user:o,posts:x})=>{const{t:n}=ee(),[h,k]=s.useState(!1),[N,p]=s.useState(0),[v,u]=s.useState(0),[y,f]=s.useState(null),[A,j]=s.useState(null),[r,U]=s.useState(o),[d,m]=s.useState(!1),[g,i]=s.useState({open:!1,type:"success",message:""}),[_,H]=s.useState(!1),[z,F]=s.useState(!1),[L,$]=s.useState([]),[C,T]=s.useState([]),[P,S]=s.useState(!1),[B,E]=s.useState(!1);s.useEffect(()=>{l.user&&r&&l.user.id!==r.id?fetch(`/users/${r.username}/follow/check`).then(a=>a.json()).then(a=>{k(a.isFollowing),p(a.followersCount),u(a.followingCount)}).catch(a=>{console.error("Follow check error:",a)}):l.user&&l.user.id===r.id&&(p(r.followers_count||0),u(r.following_count||0))},[l.user,r]);const R=async()=>{if(!(!l.user||!r||l.user.id===r.id)){m(!0);try{const t=await(await fetch(`/users/${r.username}/follow`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).json();t.success?(k(t.isFollowing),p(t.followersCount),u(t.followingCount),i({open:!0,type:"success",message:t.message})):i({open:!0,type:"error",message:t.message||"Bir hata oluştu."})}catch(a){console.error("Follow error:",a),i({open:!0,type:"error",message:"Bir hata oluştu. Lütfen tekrar deneyin."})}finally{m(!1)}}},O=async()=>{S(!0);try{const t=await(await fetch(`/users/${r.username}/followers`)).json();$(t.followers.data||[])}catch(a){console.error("Followers error:",a)}finally{S(!1)}},Y=async()=>{E(!0);try{const t=await(await fetch(`/users/${r.username}/following`)).json();T(t.following.data||[])}catch(a){console.error("Following error:",a)}finally{E(!1)}},D=a=>{const t=a.target.files[0];if(t){f(t);const c=URL.createObjectURL(t);j(c)}},q=async()=>{if(y){m(!0);try{const a=new FormData;a.append("profile_photo",y);const t=await fetch("/profile/photo",{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:a});if(t.ok){const c=await t.json();m(!1),f(null),j(null),c.profile_photo&&U(I=>({...I,profile_photo:c.profile_photo})),i({open:!0,type:"success",message:"Profil fotoğrafı başarıyla güncellendi!"})}else{const c=await t.json().catch(()=>({}));throw new Error(c.message||"Upload failed")}}catch(a){console.error("Upload error:",a),m(!1),i({open:!0,type:"error",message:"Fotoğraf yüklenirken bir hata oluştu: "+a.message})}}};return e.jsxs(G,{auth:l,children:[e.jsx(K,{title:n("profile")}),e.jsx(J,{open:g.open,type:g.type,message:g.message,onClose:()=>i({...g,open:!1})}),e.jsx("div",{className:"pb-4 mt-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-0",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 mb-4",children:[e.jsx("div",{className:"text-center mb-6",children:e.jsxs("div",{className:"relative inline-block",children:[e.jsxs("div",{className:"relative",children:[A?e.jsx("img",{src:A,alt:"Profil önizleme",className:"w-24 h-24 rounded-full object-cover mx-auto"}):r.profile_photo?e.jsx("img",{src:`/storage/${r.profile_photo}`,alt:"Profil fotoğrafı",className:"w-24 h-24 rounded-full object-cover mx-auto",onError:a=>{a.target.style.display="none",a.target.nextSibling.style.display="flex"}}):e.jsx("div",{className:"w-24 h-24 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center mx-auto",style:{display:r.profile_photo?"none":"flex"},children:r.name?e.jsx("span",{className:"text-2xl font-bold",children:r.name.split(" ").map(a=>a.charAt(0)).join("").toUpperCase().slice(0,2)}):e.jsx(w,{className:"w-12 h-12 text-gray-600 dark:text-gray-400"})}),l.user&&l.user.id===o.id&&e.jsx("div",{className:"absolute bottom-0 right-0",children:e.jsxs("label",{className:"flex items-center justify-center bg-gray-900 dark:bg-gray-700 text-white p-2 rounded-full hover:bg-gray-800 dark:hover:bg-gray-600 transition-colors cursor-pointer",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("input",{type:"file",accept:"image/*",onChange:D,className:"hidden"})]})})]}),y&&l.user&&l.user.id===o.id&&e.jsxs("div",{className:"mt-4 flex justify-center space-x-2",children:[e.jsx(b,{onClick:q,disabled:d,size:"sm",variant:"primary",children:d?n("uploading","Yükleniyor..."):n("save")}),e.jsx(b,{onClick:()=>{f(null),j(null)},size:"sm",variant:"secondary",children:n("cancel")})]})]})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:o.name}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-4",children:["@",o.username||"user"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-lg p-2 transition-colors",onClick:()=>{H(!0),O()},children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:N}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:n("followers")})]}),e.jsxs("div",{className:"text-center cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-lg p-2 transition-colors",onClick:()=>{F(!0),Y()},children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:v}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:n("following")})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:x?.length||0}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:n("film")})]})]}),l.user&&l.user.id!==r.id&&e.jsx("div",{className:"mb-6",children:e.jsx("button",{onClick:R,disabled:d,className:`w-full px-4 py-3 rounded-full text-sm font-medium transition-all duration-200 flex items-center justify-center space-x-2 ${h?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/30":"bg-blue-600 dark:bg-blue-500 text-white hover:bg-blue-700 dark:hover:bg-blue-600 shadow-sm hover:shadow-md"} ${d?"opacity-50 cursor-not-allowed":""}`,children:d?e.jsxs(e.Fragment,{children:[e.jsx(Loading,{size:"sm"}),e.jsx("span",{children:h?"Takip Bırakılıyor...":"Takip Ediliyor..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{children:h?"Takibi Bırak":"Takip Et"})})})})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx("div",{className:"space-y-4",children:x&&x.length>0?x.map(a=>e.jsx(Q,{post:a,user:r,onLike:()=>{},onComment:()=>{}},a.id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Henüz paylaşım yapmamışsınız."}),e.jsx(X,{href:"/create",className:"mt-4 inline-block",children:e.jsx(b,{variant:"primary",size:"sm",children:"İlk Paylaşımınızı Yapın"})})]})})})]})}),_&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full max-h-96 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Takipçiler (",N,")"]}),e.jsx("button",{onClick:()=>H(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(V,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-4 overflow-y-auto max-h-80",children:P?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Loading,{size:"md"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Yükleniyor..."})]}):L.length>0?e.jsx("div",{className:"space-y-3",children:L.map(a=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0",children:a.profile_photo?e.jsx("img",{src:`/storage/${a.profile_photo}`,alt:a.name,className:"w-10 h-10 rounded-full object-cover"}):e.jsx("div",{className:"w-10 h-10 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center",children:a.name?e.jsx("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:a.name.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().slice(0,2)}):e.jsx(w,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:a.name}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:["@",a.username]})]})]},a.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Z,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Henüz takipçi yok"})]})})]})}),z&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full max-h-96 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Takip Edilenler (",v,")"]}),e.jsx("button",{onClick:()=>F(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(V,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-4 overflow-y-auto max-h-80",children:B?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Loading,{size:"md"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Yükleniyor..."})]}):C.length>0?e.jsx("div",{className:"space-y-3",children:C.map(a=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0",children:a.profile_photo?e.jsx("img",{src:`/storage/${a.profile_photo}`,alt:a.name,className:"w-10 h-10 rounded-full object-cover"}):e.jsx("div",{className:"w-10 h-10 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center",children:a.name?e.jsx("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:a.name.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().slice(0,2)}):e.jsx(w,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:a.name}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:["@",a.username]})]})]},a.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Z,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Henüz kimseyi takip etmiyor"})]})})]})})]})};export{we as default};
