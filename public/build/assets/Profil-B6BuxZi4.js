import{r as a,j as e,H as F,L as V}from"./app-DtpYycAE.js";import{U as S}from"./UserLayout-DvlJD6GH.js";import{B as y}from"./Buton-Y8Elo9-Q.js";import{A as M,P as U}from"./PostCard-AQysj2O1.js";import{p as P}from"./IconBase.es-CxGV17Vr.js";import{n as _}from"./User.es-Lo4wdCaN.js";import{u as z}from"./useTranslation-C5ZaJDQL.js";import"./Logo-CvitF4wI.js";import"./MagnifyingGlass.es-DzjnCJT7.js";import"./TimeAgo-BgwAoUoI.js";import"./Confirm-p6tqtN0C.js";import"./Trash.es-D2E_07NO.js";import"./Loading-C7vEIVbU.js";import"./ChatCircle.es-BbZFmOqa.js";import"./Heart.es-Bk5BRy3a.js";const T=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,52H182.42L170,33.34A12,12,0,0,0,160,28H96a12,12,0,0,0-10,5.34L73.57,52H48A28,28,0,0,0,20,80V192a28,28,0,0,0,28,28H208a28,28,0,0,0,28-28V80A28,28,0,0,0,208,52Zm4,140a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V80a4,4,0,0,1,4-4H80a12,12,0,0,0,10-5.34L102.42,52h51.15L166,70.66A12,12,0,0,0,176,76h32a4,4,0,0,1,4,4ZM128,84a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,84Zm0,72a24,24,0,1,1,24-24A24,24,0,0,1,128,156Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,64H176L160,40H96L80,64H48A16,16,0,0,0,32,80V192a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V80A16,16,0,0,0,208,64ZM128,168a36,36,0,1,1,36-36A36,36,0,0,1,128,168Z",opacity:"0.2"}),a.createElement("path",{d:"M208,56H180.28L166.65,35.56A8,8,0,0,0,160,32H96a8,8,0,0,0-6.65,3.56L75.71,56H48A24,24,0,0,0,24,80V192a24,24,0,0,0,24,24H208a24,24,0,0,0,24-24V80A24,24,0,0,0,208,56Zm8,136a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V80a8,8,0,0,1,8-8H80a8,8,0,0,0,6.66-3.56L100.28,48h55.43l13.63,20.44A8,8,0,0,0,176,72h32a8,8,0,0,1,8,8ZM128,88a44,44,0,1,0,44,44A44.05,44.05,0,0,0,128,88Zm0,72a28,28,0,1,1,28-28A28,28,0,0,1,128,160Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,56H180.28L166.65,35.56A8,8,0,0,0,160,32H96a8,8,0,0,0-6.65,3.56L75.71,56H48A24,24,0,0,0,24,80V192a24,24,0,0,0,24,24H208a24,24,0,0,0,24-24V80A24,24,0,0,0,208,56Zm-44,76a36,36,0,1,1-36-36A36,36,0,0,1,164,132Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,58H179.21L165,36.67A6,6,0,0,0,160,34H96a6,6,0,0,0-5,2.67L76.78,58H48A22,22,0,0,0,26,80V192a22,22,0,0,0,22,22H208a22,22,0,0,0,22-22V80A22,22,0,0,0,208,58Zm10,134a10,10,0,0,1-10,10H48a10,10,0,0,1-10-10V80A10,10,0,0,1,48,70H80a6,6,0,0,0,5-2.67L99.21,46h57.57L171,67.33A6,6,0,0,0,176,70h32a10,10,0,0,1,10,10ZM128,90a42,42,0,1,0,42,42A42,42,0,0,0,128,90Zm0,72a30,30,0,1,1,30-30A30,30,0,0,1,128,162Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,56H180.28L166.65,35.56A8,8,0,0,0,160,32H96a8,8,0,0,0-6.65,3.56L75.71,56H48A24,24,0,0,0,24,80V192a24,24,0,0,0,24,24H208a24,24,0,0,0,24-24V80A24,24,0,0,0,208,56Zm8,136a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V80a8,8,0,0,1,8-8H80a8,8,0,0,0,6.66-3.56L100.28,48h55.43l13.63,20.44A8,8,0,0,0,176,72h32a8,8,0,0,1,8,8ZM128,88a44,44,0,1,0,44,44A44.05,44.05,0,0,0,128,88Zm0,72a28,28,0,1,1,28-28A28,28,0,0,1,128,160Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,60H178.13L163.32,37.78A4,4,0,0,0,160,36H96a4,4,0,0,0-3.32,1.78L77.85,60H48A20,20,0,0,0,28,80V192a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V80A20,20,0,0,0,208,60Zm12,132a12,12,0,0,1-12,12H48a12,12,0,0,1-12-12V80A12,12,0,0,1,48,68H80a4,4,0,0,0,3.33-1.78L98.13,44h59.72l14.82,22.22A4,4,0,0,0,176,68h32a12,12,0,0,1,12,12ZM128,92a40,40,0,1,0,40,40A40,40,0,0,0,128,92Zm0,72a32,32,0,1,1,32-32A32,32,0,0,1,128,164Z"}))]]),H=a.forwardRef((s,i)=>a.createElement(P,{ref:i,...s,weights:T}));H.displayName="CameraIcon";const R=H,te=({auth:s,user:i,posts:c})=>{const{t:o}=z(),[j,w]=a.useState(!1),[v,m]=a.useState(0),[N,g]=a.useState(0),[x,p]=a.useState(null),[A,h]=a.useState(null),[r,k]=a.useState(i),[b,f]=a.useState(!1),[d,u]=a.useState({open:!1,type:"success",message:""});a.useEffect(()=>{s.user&&r&&s.user.id!==r.id?fetch(`/users/${r.id}/follow/check`).then(t=>t.json()).then(t=>{w(t.isFollowing),m(t.followersCount),g(t.followingCount)}):s.user&&s.user.id===r.id&&(m(r.followers_count||0),g(r.following_count||0))},[s.user,r]);const L=async()=>{if(!(!s.user||!r||s.user.id===r.id))try{const l=await(await fetch(`/users/${r.id}/follow`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).json();l.success&&(w(l.isFollowing),m(l.followersCount),g(l.followingCount))}catch(t){console.error("Follow error:",t)}},Z=t=>{const l=t.target.files[0];if(l){p(l);const n=URL.createObjectURL(l);h(n)}},C=async()=>{if(x){f(!0);try{const t=new FormData;t.append("profile_photo",x);const l=await fetch("/profile/photo",{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:t});if(l.ok){const n=await l.json();f(!1),p(null),h(null),n.profile_photo&&k(E=>({...E,profile_photo:n.profile_photo})),u({open:!0,type:"success",message:"Profil fotoğrafı başarıyla güncellendi!"})}else{const n=await l.json().catch(()=>({}));throw new Error(n.message||"Upload failed")}}catch(t){console.error("Upload error:",t),f(!1),u({open:!0,type:"error",message:"Fotoğraf yüklenirken bir hata oluştu: "+t.message})}}};return e.jsxs(S,{auth:s,children:[e.jsx(F,{title:o("profile")}),e.jsx(M,{open:d.open,type:d.type,message:d.message,onClose:()=>u({...d,open:!1})}),e.jsx("div",{className:"px-4 py-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-0",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[e.jsx("div",{className:"text-center mb-6",children:e.jsxs("div",{className:"relative inline-block",children:[e.jsxs("div",{className:"relative",children:[A?e.jsx("img",{src:A,alt:"Profil önizleme",className:"w-24 h-24 rounded-full object-cover mx-auto"}):r.profile_photo?e.jsx("img",{src:`/storage/${r.profile_photo}`,alt:"Profil fotoğrafı",className:"w-24 h-24 rounded-full object-cover mx-auto"}):e.jsx("div",{className:"w-24 h-24 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center mx-auto",children:e.jsx(_,{className:"w-12 h-12 text-gray-600 dark:text-gray-400"})}),s.user&&s.user.id===i.id&&e.jsx("div",{className:"absolute bottom-0 right-0",children:e.jsxs("label",{className:"flex items-center justify-center bg-gray-900 dark:bg-gray-700 text-white p-2 rounded-full hover:bg-gray-800 dark:hover:bg-gray-600 transition-colors cursor-pointer",children:[e.jsx(R,{className:"w-4 h-4"}),e.jsx("input",{type:"file",accept:"image/*",onChange:Z,className:"hidden"})]})})]}),x&&s.user&&s.user.id===i.id&&e.jsxs("div",{className:"mt-4 flex justify-center space-x-2",children:[e.jsx(y,{onClick:C,disabled:b,size:"sm",variant:"primary",children:b?o("uploading","Yükleniyor..."):o("save")}),e.jsx(y,{onClick:()=>{p(null),h(null)},size:"sm",variant:"secondary",children:o("cancel")})]})]})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:r.name.split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" ")}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-4",children:["@",r.username||r.name?.toLowerCase().replace(/\s+/g,"")||"user"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:v}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:o("followers")})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:N}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:o("following")})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c?.length||0}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:o("film")})]})]}),s.user&&s.user.id!==r.id&&e.jsx("div",{className:"mb-6",children:e.jsx("button",{onClick:L,className:`w-full px-4 py-2 rounded-full text-sm font-medium transition-colors ${j?"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300":"bg-gray-900 dark:bg-gray-700 text-white hover:bg-gray-800 dark:hover:bg-gray-600"}`,children:j?o("following_now","Takip Ediliyor"):o("follow")})})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx("div",{className:"space-y-4",children:c&&c.length>0?c.map(t=>e.jsx(U,{post:t,user:r,onLike:()=>{},onComment:()=>{}},t.id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Henüz paylaşım yapmamışsınız."}),e.jsx(V,{href:"/create",className:"mt-4 inline-block",children:e.jsx(y,{variant:"primary",size:"sm",children:"İlk Paylaşımınızı Yapın"})})]})})})]})})]})};export{te as default};
