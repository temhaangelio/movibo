import{b as C,r as l,u as D,j as e,H as o,L as d,a as B}from"./app-1CFGegWC.js";import{U as m,L,n as $,B as R,b as M}from"./UserLayout-BdK1clx9.js";import{s as O}from"./ArrowLeft.es-hI4q9-37.js";import{n as g}from"./User.es-DyCkQSaU.js";import{B as P}from"./Buton-D5AuJqn0.js";import{u as U}from"./useTranslation-B6O3CaGH.js";import"./Logo-Bs4F9_8V.js";import"./IconBase.es-CROb1i5a.js";import"./MagnifyingGlass.es-B-Qxmdvq.js";const V=({auth:i})=>{const{t:r}=U(),{props:j}=C(),x=j.id,[t,b]=l.useState(null),[v,y]=l.useState(!0),[N,c]=l.useState(!1),[Y,w]=l.useState(null),[_,h]=l.useState(0),{data:n,setData:u,post:k,processing:f,errors:p,reset:E}=D({content:"",media_type:"movie",media_id:"",media_title:"",media_description:"",media_poster:"",media_release_date:"",media_rating:"",media_genre:"",media_author:"",media_director:"",user_rating:""});l.useEffect(()=>{S()},[x]);const S=async()=>{try{const a=await(await fetch(`/api/movies/${x}`)).json();a.success&&b(a.movie)}catch(s){console.error("Error fetching movie details:",s)}finally{y(!1)}},z=s=>{h(s),u("user_rating",s.toString())},F=s=>{s.preventDefault(),k("/posts",{onSuccess:()=>{E(),w(null),h(0),B.visit("/home"),c(!1)}})};return v?e.jsxs(m,{auth:i,children:[e.jsx(o,{title:"Film Yükleniyor..."}),e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(L,{size:"xl"})})]}):t?e.jsxs(m,{auth:i,children:[e.jsx(o,{title:t.title}),e.jsxs("div",{className:"w-full pt-4 pb-12",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 z-0 overflow-hidden",children:e.jsx("img",{src:t.poster_path,alt:"",className:"w-full h-full object-cover opacity-50 scale-110",onError:s=>{s.target.style.display="none"}})}),e.jsx("div",{className:"relative z-10 flex justify-center items-center h-96",children:e.jsx("img",{src:t.poster_path,alt:t.title,className:"max-w-full max-h-full object-contain",onError:s=>{s.target.src="https://via.placeholder.com/400x600/cccccc/666666?text=No+Image"}})}),e.jsx("div",{className:"absolute top-4 left-4 z-20",children:e.jsx("button",{onClick:()=>window.history.back(),className:"bg-black bg-opacity-75 text-white p-2 rounded-full hover:bg-opacity-90 transition-all flex items-center justify-center",children:e.jsx(O,{className:"w-5 h-5"})})}),e.jsxs("div",{className:"absolute top-4 right-4 z-20 bg-black bg-opacity-75 text-white px-3 py-1 rounded-full flex items-center",children:[e.jsx($,{className:"w-4 h-4 mr-1",weight:"fill"}),t.vote_average.toFixed(1)]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"mb-3",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:t.title}),e.jsx("div",{className:"flex items-center text-gray-500 text-sm",children:new Date(t.release_date).getFullYear()})]})}),e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-gray-600 leading-relaxed",children:t.overview||"Bu film için henüz açıklama bulunmuyor."})}),e.jsx("button",{onClick:()=>c(!0),className:"w-full bg-black text-white py-3 rounded-lg font-medium transition-colors flex items-center justify-center",children:"Ekle"})]})]}),t.cast&&t.cast.length>0&&e.jsxs("div",{className:"mt-6 bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Oyuncular"}),e.jsx("div",{className:"flex space-x-4 overflow-x-auto pb-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 hover:scrollbar-thumb-gray-400",children:t.cast.map(s=>e.jsxs("div",{className:"text-center flex-shrink-0",children:[e.jsx(d,{href:`/actors/${s.id}`,children:e.jsx("div",{className:"w-16 h-16 mb-2 rounded-full overflow-hidden bg-gray-200 hover:scale-105 transition-transform cursor-pointer",children:s.profile_path?e.jsx("img",{src:s.profile_path,alt:s.name,className:"w-full h-full object-cover",onError:a=>{a.target.src="https://via.placeholder.com/64x64/cccccc/666666?text=?"}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500",children:e.jsx(g,{className:"w-8 h-8"})})})}),e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate w-16",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500 truncate w-16",children:s.character})]},s.id))})]}),t.crew&&t.crew.length>0&&e.jsxs("div",{className:"mt-6 bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Ekip"}),e.jsx("div",{className:"flex space-x-4 overflow-x-auto pb-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 hover:scrollbar-thumb-gray-400",children:t.crew.map(s=>e.jsxs("div",{className:"text-center flex-shrink-0",children:[e.jsx(d,{href:`/actors/${s.id}`,children:e.jsx("div",{className:"w-16 h-16 mb-2 rounded-full overflow-hidden bg-gray-200 hover:scale-105 transition-transform cursor-pointer",children:s.profile_path?e.jsx("img",{src:s.profile_path,alt:s.name,className:"w-full h-full object-cover",onError:a=>{a.target.src="https://via.placeholder.com/64x64/cccccc/666666?text=?"}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500",children:e.jsx(g,{className:"w-8 h-8"})})})}),e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate w-16",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500 truncate w-16",children:s.job})]},s.id))})]}),e.jsx(R,{isOpen:N,onClose:()=>c(!1),title:"Film Ekle",maxHeight:"max-h-[80vh]",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-neutral-800 rounded-lg p-3 border border-neutral-700",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[t.poster_path&&e.jsx("img",{src:`https://image.tmdb.org/t/p/w92${t.poster_path}`,alt:t.title,className:"w-12 h-18 object-cover rounded",onError:s=>{s.target.style.display="none"}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-white text-sm",children:t.title}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-neutral-400",children:[t.release_date&&e.jsx("span",{children:new Date(t.release_date).getFullYear()}),t.vote_average&&e.jsxs("span",{children:["⭐ ",t.vote_average,"/10"]})]})]})]})}),e.jsx(M,{value:_,onChange:z,label:r("your_rating","Puanınız")}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-1",children:r("comment","Yorum")}),e.jsx("textarea",{value:n.content,onChange:s=>{const a=s.target.value;a.length<=250&&u("content",a)},placeholder:r("comment_placeholder","Filminiz hakkında düşüncelerinizi paylaşın..."),rows:2,className:"w-full px-2 py-1 border border-neutral-700 rounded-md shadow-sm placeholder:text-neutral-400 bg-neutral-800 text-white focus:outline-none focus:ring-2 focus:ring-neutral-400 focus:border-neutral-400"}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[p.content&&e.jsx("p",{className:"text-sm text-red-400",children:p.content}),e.jsxs("p",{className:`text-sm ml-auto ${n.content.length>200?"text-red-400":"text-neutral-400"}`,children:[n.content.length,"/250"]})]})]}),e.jsx("div",{className:"pt-2",children:e.jsx(P,{type:"submit",disabled:f,className:"w-full",size:"lg",onClick:F,children:f?r("sharing","Paylaşılıyor..."):r("share","Paylaş")})})]})})]})]}):e.jsxs(m,{auth:i,children:[e.jsx(o,{title:"Film Bulunamadı"}),e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Film bulunamadı"}),e.jsx(d,{href:"/discover",children:e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Geri Dön"})})]})})]})};export{V as default};
