import{j as e,r as a,u as j,H as k}from"./app-DtpYycAE.js";import{U as w}from"./UserLayout-DvlJD6GH.js";import{P as v}from"./PostCard-AQysj2O1.js";import{L as T}from"./Loading-C7vEIVbU.js";import{s as P}from"./FileText.es-D_d1bIHP.js";import{u as C}from"./useTranslation-C5ZaJDQL.js";import"./Logo-CvitF4wI.js";import"./IconBase.es-CxGV17Vr.js";import"./MagnifyingGlass.es-DzjnCJT7.js";import"./User.es-Lo4wdCaN.js";import"./TimeAgo-BgwAoUoI.js";import"./Confirm-p6tqtN0C.js";import"./Trash.es-D2E_07NO.js";import"./Buton-Y8Elo9-Q.js";import"./ChatCircle.es-BbZFmOqa.js";import"./Heart.es-Bk5BRy3a.js";const N=({tabs:r,activeTab:l,onTabChange:x})=>e.jsx("div",{className:"flex w-full  border-b border-gray-200 dark:border-gray-700",children:r.map(t=>e.jsx("button",{onClick:()=>x(t.id),className:`px-4 py-2 w-full transition-colors h-14 ${l===t.id?"text-gray-900 dark:text-white font-bold border-b-4 border-gray-900 dark:border-gray-100":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:t.label},t.id))}),O=({auth:r,posts:l,user:x})=>{const{t}=C(),[L,S]=a.useState("movie"),[n,u]=a.useState("following"),[d,m]=a.useState(l),[y,f]=a.useState(!1);j({title:"",content:"",media_type:"movie",media_id:"",media_title:"",media_description:"",media_poster:"",media_release_date:"",media_rating:"",media_genre:"",media_author:"",media_director:""});const h=(s,o,i)=>{m(c=>c.map(p=>p.id===s?{...p,is_liked:o,likes_count:i}:p))},g=s=>{console.log("Comment:",s)},_=s=>{m(o=>o.filter(i=>i.id!==s))},b=async s=>{f(!0);try{const c=await(await fetch(s==="following"?"/api/posts/following":"/api/posts/all")).json();m(c.posts)}catch(o){console.error("Posts fetch error:",o)}finally{f(!1)}};return a.useEffect(()=>{b(n)},[n]),e.jsxs(w,{auth:r,children:[e.jsx(k,{title:t("home")}),e.jsxs("div",{className:"mx-auto w-full px-6",children:[e.jsx(N,{tabs:[{id:"following",label:t("following_posts","Takip Ettiklerin")},{id:"all",label:t("all_posts","Tüm Paylaşımlar")}],activeTab:n,onTabChange:u}),e.jsx("div",{className:"py-4",children:y?e.jsx("div",{className:"text-center py-12",children:e.jsx(T,{size:"lg",showText:!0,text:t("loading_posts","Paylaşımlar yükleniyor...")})}):d&&d.length>0?e.jsx("div",{className:"space-y-4",children:d.map(s=>e.jsx(v,{post:s,user:r.user,onLike:h,onComment:g,onDelete:_},s.id))}):e.jsxs("div",{className:"flex flex-col w-full items-center py-12 text-black dark:text-white",children:[e.jsx(P,{size:48}),e.jsx("span",{children:t("no_content_yet","Henüz bir içerik yok!")})]})})]})]})};export{O as default};
