import{r as a,u as D,j as e,H as Z}from"./app-BxQPgtb9.js";import{U as T,n as A}from"./UserLayout-Cbl4QYld.js";import{T as S}from"./TextInput-LDZ5qJ2m.js";import{B as l}from"./Buton-KU3zOrn9.js";import{m as z,M as C}from"./Modal-LeI9PpW3.js";import{C as F}from"./Card-qgyj7Ax1.js";import{L as _}from"./Loading-a0oDpa71.js";import{s as y}from"./ChatCircle.es-Bpseklhl.js";import{s as Y}from"./CheckCircle.es-CeY6HG5G.js";import{n as c}from"./Clock.es-zIeLwkp3.js";import{p as B}from"./IconBase.es-By_IpqBY.js";import{u as I}from"./useTranslation-C4Ns4NGg.js";import"./Logo-Bxg93IHV.js";import"./MagnifyingGlass.es-z8P5kMO9.js";import"./User.es-BsD0VfQS.js";import"./X.es-Di5Rw9Gm.js";const R=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M168.49,104.49,145,128l23.52,23.51a12,12,0,0,1-17,17L128,145l-23.51,23.52a12,12,0,0,1-17-17L111,128,87.51,104.49a12,12,0,0,1,17-17L128,111l23.51-23.52a12,12,0,0,1,17,17ZM236,128A108,108,0,1,1,128,20,108.12,108.12,0,0,1,236,128Zm-24,0a84,84,0,1,0-84,84A84.09,84.09,0,0,0,212,128Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"}),a.createElement("path",{d:"M165.66,101.66,139.31,128l26.35,26.34a8,8,0,0,1-11.32,11.32L128,139.31l-26.34,26.35a8,8,0,0,1-11.32-11.32L116.69,128,90.34,101.66a8,8,0,0,1,11.32-11.32L128,116.69l26.34-26.35a8,8,0,0,1,11.32,11.32ZM232,128A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm37.66,130.34a8,8,0,0,1-11.32,11.32L128,139.31l-26.34,26.35a8,8,0,0,1-11.32-11.32L116.69,128,90.34,101.66a8,8,0,0,1,11.32-11.32L128,116.69l26.34-26.35a8,8,0,0,1,11.32,11.32L139.31,128Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M164.24,100.24,136.48,128l27.76,27.76a6,6,0,1,1-8.48,8.48L128,136.48l-27.76,27.76a6,6,0,0,1-8.48-8.48L119.52,128,91.76,100.24a6,6,0,0,1,8.48-8.48L128,119.52l27.76-27.76a6,6,0,0,1,8.48,8.48ZM230,128A102,102,0,1,1,128,26,102.12,102.12,0,0,1,230,128Zm-12,0a90,90,0,1,0-90,90A90.1,90.1,0,0,0,218,128Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M165.66,101.66,139.31,128l26.35,26.34a8,8,0,0,1-11.32,11.32L128,139.31l-26.34,26.35a8,8,0,0,1-11.32-11.32L116.69,128,90.34,101.66a8,8,0,0,1,11.32-11.32L128,116.69l26.34-26.35a8,8,0,0,1,11.32,11.32ZM232,128A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M162.83,98.83,133.66,128l29.17,29.17a4,4,0,0,1-5.66,5.66L128,133.66,98.83,162.83a4,4,0,0,1-5.66-5.66L122.34,128,93.17,98.83a4,4,0,0,1,5.66-5.66L128,122.34l29.17-29.17a4,4,0,1,1,5.66,5.66ZM228,128A100,100,0,1,1,128,28,100.11,100.11,0,0,1,228,128Zm-8,0a92,92,0,1,0-92,92A92.1,92.1,0,0,0,220,128Z"}))]]),b=a.forwardRef((n,d)=>a.createElement(B,{ref:d,...n,weights:R}));b.displayName="XCircleIcon";const $=b,re=({auth:n})=>{const{t:d}=I(),[j,s]=a.useState(!1),[o,k]=a.useState([]),[f,N]=a.useState(!0),{data:m,setData:x,post:w,processing:u,errors:i,reset:p}=D({subject:"",message:""}),g=async()=>{try{const r=await(await fetch("/api/support/tickets",{credentials:"same-origin"})).json();r.success&&k(r.tickets)}catch(t){console.error("Destek istekleri yüklenirken hata:",t)}finally{N(!1)}};a.useEffect(()=>{g()},[]);const v=t=>{t.preventDefault(),w("/support",{onSuccess:()=>{s(!1),p(),g(),alert("Destek isteğiniz başarıyla gönderildi!")},onError:r=>{console.error("Destek isteği gönderilirken hata:",r)}})},h=()=>{p(),s(!0)},L=t=>{switch(t){case"open":return e.jsx(c,{className:"w-4 h-4 text-yellow-500"});case"closed":return e.jsx(Y,{className:"w-4 h-4 text-green-500"});case"pending":return e.jsx($,{className:"w-4 h-4 text-red-500"});default:return e.jsx(c,{className:"w-4 h-4 text-gray-500"})}},E=t=>{switch(t){case"open":return"Açık";case"closed":return"Kapalı";case"pending":return"Beklemede";default:return"Bilinmiyor"}},M=t=>{switch(t){case"open":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"closed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"pending":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return e.jsxs(T,{auth:n,children:[e.jsx(Z,{title:"Destek"}),e.jsxs("div",{className:"px-4 py-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Destek"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Sorun yaşıyorsanız destek ekibimizle iletişime geçin"})]}),e.jsxs(l,{onClick:h,variant:"primary",children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Yeni Destek İsteği"]})]})}),e.jsx(F,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Destek İstekleriniz"}),f?e.jsx("div",{className:"text-center py-8",children:e.jsx(_,{size:"lg",showText:!0,text:"Yükleniyor..."})}):o.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(z,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Henüz destek isteğiniz bulunmuyor."}),e.jsx(l,{onClick:h,variant:"primary",children:"İlk Destek İsteğinizi Gönderin"})]}):e.jsx("div",{className:"space-y-4",children:o.map(t=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[L(t.status),e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:t.subject})]}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${M(t.status)}`,children:E(t.status)})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 line-clamp-2",children:t.message}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(c,{className:"w-3 h-3"}),e.jsx("span",{children:new Date(t.created_at).toLocaleDateString("tr-TR")})]}),t.admin_reply&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(y,{className:"w-3 h-3"}),e.jsx("span",{children:"Yanıtlandı"})]})]})]})}),t.admin_reply&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(y,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-200",children:"Admin Yanıtı"})]}),e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:t.admin_reply}),t.replied_at&&e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-2",children:new Date(t.replied_at).toLocaleDateString("tr-TR")})]})})]},t.id))})]})})]}),e.jsx(C,{isOpen:j,onClose:()=>s(!1),title:"Yeni Destek İsteği",maxWidth:"max-w-lg",children:e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsx(S,{label:"Konu",value:m.subject,onChange:t=>x("subject",t.target.value),error:i.subject,placeholder:"Sorununuzun kısa açıklaması",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Mesaj"}),e.jsx("textarea",{value:m.message,onChange:t=>x("message",t.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm placeholder-gray-400 dark:placeholder-gray-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 resize-none",rows:5,placeholder:"Sorununuzu detaylı bir şekilde açıklayın...",required:!0}),i.message&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:i.message})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(l,{type:"button",variant:"secondary",onClick:()=>s(!1),children:"İptal"}),e.jsx(l,{type:"submit",disabled:u,children:u?"Gönderiliyor...":"Gönder"})]})]})})]})};export{re as default};
