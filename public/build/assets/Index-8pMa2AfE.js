import{r as l,j as e,H as v,L as C,a as S}from"./app-1CFGegWC.js";import{A as T}from"./AdminLayout-D7j9ioO5.js";import{C as D}from"./Card-BArZlIJg.js";import{C as L}from"./Confirm-B68scm7X.js";import{T as B,a as H,b as a,c as $,d as h,e as t,P as K}from"./Pagination-_IJiNVIt.js";import{H as A}from"./Header-BC9pIts0.js";import{s as I}from"./ChatCircle.es-DsYPXDwK.js";import{s as z}from"./CheckCircle.es-Dgdv_9V1.js";import{n as d}from"./Clock.es-DnADivhs.js";import{n as Y}from"./Eye.es-DB-TjQAv.js";import{m as _}from"./Question.es-CoMpDBGK.js";import{n as F}from"./Trash.es-C5et1ok0.js";import{s as P}from"./XCircle.es-BeaMrH8l.js";import{u as R}from"./useTranslation-B6O3CaGH.js";import"./Dropdown-DckoYLvu.js";import"./IconBase.es-CROb1i5a.js";import"./MagnifyingGlass.es-B-Qxmdvq.js";import"./Users.es-tAYOSNba.js";const ie=({tickets:r={data:[],links:[],total:0,from:0,to:0}})=>{const{t:k}=R(),[m,x]=l.useState(null),[f,i]=l.useState(!1),[o,j]=l.useState(""),[c,p]=l.useState(""),u=(r?.data||[]).filter(s=>{if(o){const n=o.toLowerCase();if(!(s.user?.name?.toLowerCase().includes(n)||s.user?.email?.toLowerCase().includes(n)||s.subject?.toLowerCase().includes(n)||s.message?.toLowerCase().includes(n)))return!1}return!(c&&s.status!==c)}),g=s=>{x(s),i(!0)},b=()=>{m&&S.delete(`/panel/support/${m}`,{onSuccess:()=>{i(!1),x(null)}})},w=s=>{switch(s){case"open":return e.jsx(d,{className:"w-4 h-4 text-yellow-500"});case"closed":return e.jsx(z,{className:"w-4 h-4 text-green-500"});case"pending":return e.jsx(P,{className:"w-4 h-4 text-red-500"});default:return e.jsx(d,{className:"w-4 h-4 text-gray-500"})}},y=s=>{switch(s){case"open":return"Açık";case"closed":return"Kapalı";case"pending":return"Beklemede";default:return"Bilinmiyor"}},N=s=>{switch(s){case"open":return"bg-yellow-100 text-yellow-800";case"closed":return"bg-green-100 text-green-800";case"pending":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs(T,{children:[e.jsx(v,{title:"Destek Yönetimi"}),e.jsxs(D,{className:"p-6",children:[e.jsx(A,{title:"Destek Yönetimi",searchTerm:o,onSearchChange:s=>j(s.target.value),searchPlaceholder:"Kullanıcı, konu veya mesaj ara..."}),e.jsx("div",{className:"mb-4 flex flex-wrap gap-2",children:e.jsxs("select",{value:c,onChange:s=>p(s.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Tüm Durumlar"}),e.jsx("option",{value:"open",children:"Açık"}),e.jsx("option",{value:"pending",children:"Beklemede"}),e.jsx("option",{value:"closed",children:"Kapalı"})]})}),e.jsxs(B,{children:[e.jsx(H,{children:e.jsxs("tr",{children:[e.jsx(a,{children:"Kullanıcı"}),e.jsx(a,{children:"Konu"}),e.jsx(a,{children:"Durum"}),e.jsx(a,{children:"Tarih"}),e.jsx(a,{children:"Yanıt"}),e.jsx(a,{align:"right",children:"İşlemler"})]})}),e.jsx($,{children:u.length===0?e.jsx(h,{children:e.jsxs(t,{colSpan:6,className:"text-center py-8",children:[e.jsx(_,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Henüz destek talebi bulunmuyor."})]})}):u.map(s=>e.jsxs(h,{children:[e.jsx(t,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-8 w-8",children:e.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-600 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-semibold",children:s.user?.name?.charAt(0).toUpperCase()})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.user?.name||"Bilinmeyen Kullanıcı"}),e.jsx("div",{className:"text-sm text-gray-500",children:s.user?.email})]})]})}),e.jsx(t,{children:e.jsx("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:s.subject})}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[w(s.status),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${N(s.status)}`,children:y(s.status)})]})}),e.jsx(t,{children:new Date(s.created_at).toLocaleDateString("tr-TR")}),e.jsx(t,{children:e.jsx("div",{className:"flex items-center space-x-1",children:s.admin_reply?e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm text-green-600",children:"Yanıtlandı"})]}):e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"w-4 h-4 text-yellow-500"}),e.jsx("span",{className:"text-sm text-yellow-600",children:"Bekliyor"})]})})}),e.jsx(t,{align:"right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(C,{href:`/panel/support/${s.id}`,className:"inline-flex items-center justify-center w-8 h-8 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 transition-colors",title:"Görüntüle",children:e.jsx(Y,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>g(s.id),className:"inline-flex items-center justify-center w-8 h-8 border border-red-300 text-xs font-medium rounded-md text-red-700 bg-white hover:bg-red-50 transition-colors",title:"Sil",children:e.jsx(F,{className:"w-4 h-4"})})]})})]},s.id))})]}),r?.links&&e.jsx(K,{links:r.links,total:r.total||0,from:r.from||0,to:r.to||0})]}),e.jsx(L,{open:f,onClose:()=>i(!1),onConfirm:b,title:"Destek İsteğini Sil",message:"Bu destek isteğini silmek istediğinize emin misiniz? Bu işlem geri alınamaz.",confirmText:"Sil",cancelText:"İptal"})]})};export{ie as default};
